"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[559],{2246:(t,s,i)=>{i.d(s,{Z:()=>o});var a=i(1519),e=i.n(a)()((function(t){return t[1]}));e.push([t.id,"[data-v-c9c281a2] .modal-backdrop{opacity:.5!important}",""]);const o=e},3164:(t,s,i)=>{i.r(s),i.d(s,{default:()=>l});const a={props:["selected","id"],mixins:[i(2063).Z],data:function(){return{loading:!1,post:{id:null,instituicao:null,sigla_instituicao:null,_method:"post"}}},watch:{selected:function(){this.selected?(this.post.id=this.selected.id,this.post.instituicao=this.selected.instituicao,this.post.sigla_instituicao=this.selected.sigla_instituicao,this.post._method="put"):this.clear()}},computed:{url:function(){return this.post&&this.post.id?"/".concat(this.post.id):""}},methods:{save:function(){var t=this;this.$validator.validate().then((function(s){s?(t.message("Aguarde...","Estamos salvando suas informações","info",-1),t.loading=!0,axios.post("".concat("https://www.sistemas.intercom.org.br","/admin/instituicao").concat(t.url),t.post).then((function(s){t.clear(),201==s.status?(t.loading=!1,t.$emit("store",s.data.response)):(t.loading=!1,t.$emit("update",s.data.response)),t.message("Sucesso",201==s.status?"Registro cadastrado.":"Registro atualizado.","success")})).catch((function(s){if(422==s.response.status&&"The given data was invalid."==s.response.data.message)return t.loading=!1,t.message("Campos Obrigatórios","Preencha todos os campos obrigatórios","error");400==s.response.status&&(t.loading=!1,t.message("Erro","Por favor tente novamente.","error")),403==s.response.status&&"This action is unauthorized."==s.response.data.message&&(t.loading=!1,t.message("Erro","Ação não autorizada.","error"))}))):t.message("Campos Obrigatórios","Preencha todos os campos obrigatórios","error")}))},clear:function(){this.post.id=null,this.post.instituicao=null,this.post.sigla_instituicao=null,this.post._method="post",this.$validator.reset("instituicao"),this.$validator.reset("sigla_instituicao")}}};var e=i(3379),o=i.n(e),n=i(2246),r={insert:"head",singleton:!1};o()(n.Z,r);n.Z.locals;const l=(0,i(1900).Z)(a,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("b-modal",{attrs:{id:"instituicaoModal","no-close-on-backdrop":""},scopedSlots:t._u([{key:"modal-header",fn:function(s){var a=s.close;return[t.post.id?i("h5",[t._v("Editar instituição")]):i("h5",[t._v("Cadastrar instituição")]),t._v(" "),i("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(t){return a()}}},[t._v("x")])]}},{key:"modal-footer",fn:function(s){var a=s.cancel;return[i("b-button",{attrs:{size:"md",variant:"outline-danger",disabled:t.loading},on:{click:function(t){return a()}}},[t._v("\n                Cancelar\n            ")]),t._v(" "),i("b-button",{attrs:{size:"md",variant:"outline-success",disabled:t.loading},on:{click:function(s){return t.save()}}},[t._v("\n                "+t._s(t.post.id?"Atualizar":"Cadastrar")+"\n            ")])]}}])},[t._v(" "),[i("b-form-group",{attrs:{label:"Instituição","label-class":"font-weight-bold"}},[i("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],class:["form-control form-control-sm",{"is-invalid":t.errors.has("instituicao")}],attrs:{name:"instituicao",size:"sm",type:"text","aria-describedby":"input-1-live-feedback","data-vv-as":"instituição",disabled:t.loading},model:{value:t.post.instituicao,callback:function(s){t.$set(t.post,"instituicao",s)},expression:"post.instituicao"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("instituicao"),expression:"errors.has(`instituicao`)"}],staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.first("instituicao"))+"\n            ")])],1),t._v(" "),i("b-form-group",{attrs:{label:"Sigla","label-class":"font-weight-bold"}},[i("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],class:["form-control form-control-sm",{"is-invalid":t.errors.has("instituicao")}],attrs:{name:"sigla_instituicao",size:"sm",type:"text","aria-describedby":"input-1-live-feedback","data-vv-as":"sigla da Instituição",disabled:t.loading},model:{value:t.post.sigla_instituicao,callback:function(s){t.$set(t.post,"sigla_instituicao",s)},expression:"post.sigla_instituicao"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("sigla_instituicao"),expression:"errors.has(`sigla_instituicao`)"}],staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.first("sigla_instituicao"))+"\n            ")])],1)]],2)}),[],!1,null,"c9c281a2",null).exports}}]);