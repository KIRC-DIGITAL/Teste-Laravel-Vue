"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[687],{440:(a,e,t)=>{t.d(e,{Z:()=>s});var r=t(1519),o=t.n(r)()((function(a){return a[1]}));o.push([a.id,"[data-v-84301282] .modal-backdrop{opacity:.5!important}",""]);const s=o},8687:(a,e,t)=>{t.r(e),t.d(e,{default:()=>v});var r=t(7757),o=t.n(r),s=t(2063);t(296);function n(a,e,t,r,o,s,n){try{var i=a[s](n),d=i.value}catch(a){return void t(a)}i.done?e(d):Promise.resolve(d).then(r,o)}function i(a){return function(){var e=this,t=arguments;return new Promise((function(r,o){var s=a.apply(e,t);function i(a){n(s,r,o,i,d,"next",a)}function d(a){n(s,r,o,i,d,"throw",a)}i(void 0)}))}}const d={props:["selectedPagar","id"],mixins:[s.Z],data:function(){return{loading:!1,url:"https://www.sistemas.intercom.org.br",amount:"0.20",form:{metodo:null,numCartao:null,validade:null,cvv:null,bandeira:null,enderecos:{id:null,cep:null,estado:null,municipio:{id:null,nome:null},pais:null,logradouro:null}}}},watch:{selectedPagar:function(){this.selectedPagar&&(this.form.metodo="credito",this.form._method="post",this.form.id=this.selectedPagar.id,this.form.name=this.selectedPagar.name,this.form.email=this.selectedPagar.email,this.form.password=this.selectedPagar.password,this.form.cpf=this.selectedPagar.cpf,this.form.rg=this.selectedPagar.rg,this.form.orgao_expedidor=this.selectedPagar.orgao_expedidor,this.form.estrangeiro=this.selectedPagar.estrangeiro,this.form.passaporte=this.selectedPagar.passaporte,this.form.data_nascimento=this.selectedPagar.data_nascimento,this.form.sexo_id=this.selectedPagar.sexo_id,this.form.celular=this.selectedPagar.celular,this.form.telefone=this.selectedPagar.telefone,this.form.enderecos=this.selectedPagar.enderecos,this.form.instituicao_id=this.selectedPagar.instituicao_id,this.form.titulacao_id=this.selectedPagar.titulacao_id,this.form.associado=this.selectedPagar.associado,this.form.ativo=this.selectedPagar.ativo),this.listarMeiosPag()},numCartao:function(){this.form.numCartao&&validarBanderia()}},computed:{hasCredito:function(){return null!=this.form.numCartao}},methods:{getEstados:function(){var a=this;return i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat("https://www.sistemas.intercom.org.br","/get/estados")).then((function(e){a.estados=e.data}));case 2:case"end":return e.stop()}}),e)})))()},listarMeiosPag:function(){var a=this;return i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:PagSeguroDirectPayment.getPaymentMethods({amount:a.amount,success:function(a){$.each(a.paymentMethods.CREDIT_CARD.options,(function(a,e){$(".meio-pag-credito").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+e.images.MEDIUM.path+"'></span>")}))},error:function(a){},complete:function(a){}});case 1:case"end":return e.stop()}}),e)})))()},validarBanderia:function(){var a=this.form.numCartao.substr(0,7);a=a.replace(/\-/g,""),PagSeguroDirectPayment.getBrand({cardBin:a,success:function(a){console.log(a);var e=a.brand.name;$(".bandeira-cartao").html("<img src='https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/68x30/"+e+".png'>"),$(".cartao-nome").html(e),$("#cartao-bandeira").removeClass("hidden"),$(".cartao-nome").removeClass("hidden")},error:function(a){}});var e=document.getElementById("cartao-nome").innerText;console.log("validarBanderia **depois do call recupParcelas: "+e),this.form.bandeira=e,this.recupParcelas(e)},recupParcelas:function(a){console.log("recupParcelas");var e=$("#noIntInstalQuantity").val();console.log("noIntInstalQuantity",e),PagSeguroDirectPayment.getInstallments({amount:this.amount,maxInstallmentNoInterest:e,brand:a,success:function(a){$.each(a.installments,(function(a,e){$.each(e,(function(a,e){var t=e.installmentAmount.toFixed(2).replace(".",","),r=e.installmentAmount.toFixed(2);$("#qntParcelas").show().append("<option value='"+e.quantity+"' data-parcelas='"+r+"'>"+e.quantity+" parcelas de R$ "+t+"</option>")}))}))},error:function(a){},complete:function(a){}})},save:function(){var a=this.form.numCartao.replace(/\-/g,""),e=document.getElementById("cartao-nome").innerText,t=this.form.validade.split("/"),r=t[0],o=t[1],s=this.form.cvv;PagSeguroDirectPayment.createCardToken({cardNumber:a,brand:e,cvv:s,expirationMonth:r,expirationYear:o,success:function(a){var e;e=a.card.token,console.log("chamou recupHashCartao"),PagSeguroDirectPayment.onSenderHashReady((function(a){if("error"==a.status)return console.log(a.message),!1;var t=a.senderHash,r=$("#qntParcelas").find(":selected").attr("data-parcelas"),o=$("#qntParcelas").find(":selected").val(),s=document.getElementById("cartao-nome").innerText,n=$("#formPagamentoCartaoCredito").serializeArray();n.push({name:"hashCartao",value:t}),n.push({name:"tokenCartao",value:e}),n.push({name:"valorParcela",value:r}),n.push({name:"parcelas",value:o}),n.push({name:"cardname",value:s}),console.log("dados: "+JSON.stringify(n)),$.ajax({method:"POST",url:"pagseguro/associado/credito",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:$.param(n),dataType:"json",success:function(a){"error"==a.message?window.location.href="https://www.sistemas.intercom.org.br?status=error":window.location.href="https://www.sistemas.intercom.org.br?status=sucess"},error:function(a){}})}))},error:function(a){},complete:function(a){}})}},created:function(){}};var c=t(3379),l=t.n(c),m=t(440),u={insert:"head",singleton:!1};l()(m.Z,u);m.Z.locals;const v=(0,t(1900).Z)(d,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("b-modal",{attrs:{id:"pagar",size:"xl"},scopedSlots:a._u([{key:"modal-header",fn:function(e){var r=e.close;return[t("div",{staticClass:"text-center"},[t("h1",[a._v("Escolha uma forma de Pagamento")])]),a._v(" "),t("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(a){return r()}}},[a._v("x")])]}},{key:"modal-footer",fn:function(e){var r=e.cancel;return[t("b-button",{attrs:{size:"md",variant:"outline-danger",disabled:a.loading},on:{click:function(a){return r()}}},[a._v("\n                Cancelar\n            ")]),a._v(" "),t("b-button",{attrs:{disabled:a.loading,size:"md",variant:"outline-success"},on:{click:function(e){return a.save()}}},[a._v("\n                "+a._s(1==a.hasCredito?"Pagar":"Gerar Boleto")+"\n            ")])]}}])},[a._v(" "),[t("div",[t("b-card",{attrs:{"no-body":""}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{attrs:{title:"Cartão de Crédito",active:""}},[t("b-card-text",[t("div",{staticClass:"container"},[t("div",{staticClass:"section-head style-3 text-center z mb-3"},[t("h2",{staticClass:"title"},[a._v("Checkout "),t("img",{attrs:{src:a.url+"/images/pagseguro.png"}})]),a._v(" "),t("p",[a._v("Preencha os dados para finalizar o pagamento")])])]),a._v(" "),t("div",{staticClass:"container"},[t("b-row",[t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Número do Cartão","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####-####-####-####",expression:"'####-####-####-####'"}],class:["form-control form-control-sm",{"is-invalid":a.errors.has("numCartao")}],attrs:{name:"numCartao",size:"sm",type:"text",disabled:a.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Número do Cartão"},on:{change:function(e){return a.validarBanderia()}},model:{value:a.form.numCartao,callback:function(e){a.$set(a.form,"numCartao",e)},expression:"form.numCartao"}}),a._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("numCartao"),expression:"errors.has(`numCartao`)"}],staticClass:"invalid-feedback"},[a._v("\n                                            "+a._s(a.errors.first("numCartao"))+"\n                                        ")]),a._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("span",{staticClass:"col-6 input-group-text bandeira-cartao creditCard hidden",staticStyle:{"background-color":"#ffffff"},attrs:{id:"cartao-bandeira"}}),a._v(" "),t("span",{staticClass:"col-6 input-group-text cartao-nome creditCard form-login-help hidden",staticStyle:{"background-color":"#ffffff"},attrs:{type:"text",id:"cartao-nome"}})])])],1)],1),a._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Validade","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"##/####",expression:"'##/####'"}],class:["form-control form-control-sm",{"is-invalid":a.errors.has("validade")}],attrs:{name:"validade",size:"sm",type:"text",disabled:a.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Validade"},model:{value:a.form.validade,callback:function(e){a.$set(a.form,"validade",e)},expression:"form.validade"}}),a._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("validade"),expression:"errors.has(`validade`)"}],staticClass:"invalid-feedback"},[a._v("\n                                            "+a._s(a.errors.first("validade"))+"\n                                        ")])],1)],1),a._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Código de Segurança","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],class:["form-control form-control-sm",{"is-invalid":a.errors.has("cvv")}],attrs:{name:"cvv",size:"sm",type:"text",disabled:a.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Código de Segurança"},model:{value:a.form.cvv,callback:function(e){a.$set(a.form,"cvv",e)},expression:"form.cvv"}}),a._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("cvv"),expression:"errors.has(`cvv`)"}],staticClass:"invalid-feedback"},[a._v("\n                                            "+a._s(a.errors.first("cvv"))+"\n                                        ")])],1)],1),a._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Quantidade de Parcelas","label-class":"font-weight-bold"}},[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],staticClass:"form-control form-control-sm",class:["form-control form-control-sm",{"is-invalid":a.errors.has("qntParcelas")}],attrs:{disabled:a.loading,name:"qntParcelas",id:"qntParcelas",size:"sm","data-vv-as":"Quantidade de Parcelas"},model:{value:a.form.qntParcelas,callback:function(e){a.$set(a.form,"qntParcelas",e)},expression:"form.qntParcelas"}}),a._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("qntParcelas"),expression:"errors.has(`qntParcelas`)"}],staticClass:"invalid-feedback"},[a._v("\n                                            "+a._s(a.errors.first("qntParcelas"))+"\n                                        ")])],1)],1)],1),a._v(" "),t("div",{staticClass:"meio-pag-credito",staticStyle:{"padding-top":"10px","padding-bottom":"20px"},attrs:{id:"meio-pag-credito",name:"meio-pag-credito",align:"center"}}),a._v(" "),t("div",{staticClass:"hidden"},[t("form",{attrs:{method:"post","accept-charset":"utf-8",name:"formPagamentoCartaoCredito",id:"formPagamentoCartaoCredito",action:""}},[t("input",{attrs:{type:"hidden",name:"recupHashCartao",id:"recupHashCartao",value:""}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"associado",id:"associado"},domProps:{value:a.form.associado}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"ativo",id:"ativo"},domProps:{value:a.form.ativo}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"celular",id:"celular"},domProps:{value:a.form.celular}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"cpf",id:"cpf"},domProps:{value:a.form.cpf}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"cvv",id:"cvv"},domProps:{value:a.form.cvv}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"id",id:"id"},domProps:{value:a.form.id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"instituicao_id",id:"instituicao_id"},domProps:{value:a.form.instituicao_id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"metodo",id:"metodo"},domProps:{value:a.form.metodo}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"name",id:"name"},domProps:{value:a.form.name}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"numCartao",id:"numCartao"},domProps:{value:a.form.numCartao}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"orgao_expedidor",id:"orgao_expedidor"},domProps:{value:a.form.orgao_expedidor}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"sexo_id",id:"sexo_id"},domProps:{value:a.form.sexo_id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"telefone",id:"telefone"},domProps:{value:a.form.telefone}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"titulacao_id",id:"titulacao_id"},domProps:{value:a.form.titulacao_id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"validade",id:"validade"},domProps:{value:a.form.validade}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"cvv",id:"cvv"},domProps:{value:a.form.cvv}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"enderecoId",id:"enderecoId"},domProps:{value:a.form.enderecos.id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"cep",id:"cep"},domProps:{value:a.form.enderecos.cep}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"estado",id:"enderecos"},domProps:{value:a.form.enderecos.estado}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"logradouro",id:"logradouro"},domProps:{value:a.form.enderecos.logradouro}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"municipio",id:"municipio"},domProps:{value:a.form.enderecos.municipio.id}}),a._v(" "),t("input",{attrs:{type:"hidden",name:"pais",id:"pais"},domProps:{value:a.form.enderecos.pais}})])])],1)])],1),a._v(" "),t("b-tab",{attrs:{title:"Boleto"}},[t("b-card-text",[a._v("Tab contents 2")])],1)],1)],1)],1)],a._v(" "),a._v(" "),t("notifications",{attrs:{group:"submit",position:"center bottom"}})],2)}),[],!1,null,"84301282",null).exports}}]);