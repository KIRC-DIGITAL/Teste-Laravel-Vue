"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[251],{5190:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(1519),o=t.n(r)()((function(e){return e[1]}));o.push([e.id,"[data-v-2523acbd] .modal-backdrop{opacity:.5!important}[data-v-2523acbd] .vue-notification{font-size:15px!important}",""]);const s=o},9251:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var r=t(7757),o=t.n(r),s=t(2063);t(296);function n(e,a,t,r,o,s,n){try{var i=e[s](n),d=i.value}catch(e){return void t(e)}i.done?a(d):Promise.resolve(d).then(r,o)}function i(e){return function(){var a=this,t=arguments;return new Promise((function(r,o){var s=e.apply(a,t);function i(e){n(s,r,o,i,d,"next",e)}function d(e){n(s,r,o,i,d,"throw",e)}i(void 0)}))}}const d={props:["selectedPagar","id"],mixins:[s.Z],data:function(){return{loading:!1,url:"https://www.sistemas.intercom.org.br",amount:null,form:{metodo:"credito",_method:"post",id:this.selectedPagar?this.selectedPagar.id:null,name:this.selectedPagar?this.selectedPagar.name:null,email:this.selectedPagar?this.selectedPagar.email:null,cpf:this.selectedPagar?this.selectedPagar.cpf:null,rg:this.selectedPagar?this.selectedPagar.rg:null,orgao_expedidor:this.selectedPagar?this.selectedPagar.orgao_expedidor:null,estrangeiro:this.selectedPagar?this.selectedPagar.estrangeiro:null,passaporte:this.selectedPagar?this.selectedPagar.passaporte:null,data_nascimento:this.selectedPagar?this.selectedPagar.data_nascimento:null,sexo_id:this.selectedPagar?this.selectedPagar.sexo_id:null,celular:this.selectedPagar?this.selectedPagar.celular:null,instituicao_id:this.selectedPagar?this.selectedPagar.instituicao_id:null,titulacao_id:this.selectedPagar?this.selectedPagar.titulacao_id:null,anuidade2022:null,ativo:this.selectedPagar?this.selectedPagar.ativo:null,quantidade:1,produto:null}}},watch:{selectedPagar:function(){this.selectedPagar&&(this.form.metodo="credito",this.form._method="post",this.form.anuidade2022=1,this.form.id=this.selectedPagar.id,this.form.name=this.selectedPagar.name,this.form.email=this.selectedPagar.email,this.form.cpf=this.selectedPagar.cpf,this.form.estrangeiro=this.selectedPagar.estrangeiro,this.form.passaporte=this.selectedPagar.passaporte,this.form.ativo=this.selectedPagar.ativo),1==this.form.anuidade2022&&(this.amount=this.produtos.find((function(e){return 1==e.id})).valor,this.form.produto=this.produtos.find((function(e){return 1==e.id}))),this.listarMeiosPag()},numCartao:function(){this.form.numCartao&&validarBanderia()}},computed:{hasCredito:function(){return null!=this.form.numCartao}},methods:{getProdutos:function(){var e=this;return i(o().mark((function a(){return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$.ajax({method:"GET",url:"get/produtos",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(a){e.produtos=a},error:function(e){console.log(e)}});case 2:case"end":return a.stop()}}),a)})))()},listarMeiosPag:function(){var e=this;return i(o().mark((function a(){return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:PagSeguroDirectPayment.getPaymentMethods({amount:e.amount,success:function(e){$.each(e.paymentMethods.CREDIT_CARD.options,(function(e,a){$(".meio-pag-credito").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+a.images.MEDIUM.path+"'></span>")})),$(".meio-pag-boleto").append("<span  class='img-band'><img width='150' height='80' src='https://stc.pagseguro.uol.com.br"+e.paymentMethods.BOLETO.options.BOLETO.images.MEDIUM.path+"'><span>")},error:function(e){this.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error")},complete:function(e){}});case 1:case"end":return a.stop()}}),a)})))()},validarBanderia:function(){var e=this.form.numCartao.substr(0,7);e=e.replace(/\-/g,""),PagSeguroDirectPayment.getBrand({cardBin:e,success:function(e){var a=e.brand.name;$(".bandeira-cartao").html("<img src='https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/68x30/"+a+".png'>"),$(".cartao-nome").html(a),$("#cartao-bandeira").removeClass("hidden"),$(".cartao-nome").removeClass("hidden")},error:function(e){this.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error")}});var a=document.getElementById("cartao-nome").innerText;this.form.bandeira=a,this.recupParcelas(a)},recupParcelas:function(e){var a=$("#noIntInstalQuantity").val();PagSeguroDirectPayment.getInstallments({amount:this.amount,maxInstallmentNoInterest:a,brand:e,success:function(e){$.each(e.installments,(function(e,a){$.each(a,(function(e,a){var t=a.installmentAmount.toFixed(2).replace(".",","),r=a.installmentAmount.toFixed(2);$("#qntParcelas").show().append("<option value='"+a.quantity+"' data-parcelas='"+r+"'>"+a.quantity+" parcelas de R$ "+t+"</option>")}))}))},error:function(e){this.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error")},complete:function(e){}})},pagarCredito:function(){var e=this.form.numCartao.replace(/\-/g,""),a=document.getElementById("cartao-nome").innerText,t=this.form.validade.split("/"),r=t[0],o=t[1],s=this.form.cvv;PagSeguroDirectPayment.createCardToken({cardNumber:e,brand:a,cvv:s,expirationMonth:r,expirationYear:o,success:function(e){var a;a=e.card.token,PagSeguroDirectPayment.onSenderHashReady((function(e){if("error"==e.status)return console.log(e.message),this.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error"),!1;var t=e.senderHash,r=$("#qntParcelas").find(":selected").attr("data-parcelas"),o=$("#qntParcelas").find(":selected").val(),s=document.getElementById("cartao-nome").innerText,n=$("#formPagamentoCartaoCredito").serializeArray();n.push({name:"hashCartao",value:t}),n.push({name:"tokenCartao",value:a}),n.push({name:"valorParcela",value:r}),n.push({name:"parcelas",value:o}),n.push({name:"cardname",value:s}),$.ajax({method:"POST",url:"pagseguro/associado/credito/anuidade",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:$.param(n),dataType:"json",success:function(e){"error"==e.message?window.location.href="https://www.sistemas.intercom.org.br?status=error":window.location.href="https://www.sistemas.intercom.org.br?status=sucess"},error:function(e){}})}))},error:function(e){this.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error")},complete:function(e){}})},pagarBoleto:function(){var e=this;return i(o().mark((function a(){return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,PagSeguroDirectPayment.onSenderHashReady((function(a){if("error"==a.status)return e.loading=!1,e.message("Erro","O Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error"),!1;e.form.hashBoleto=a.senderHash,e.form.metodo="boleto",e.$validator.validateAll().then((function(a){a?(e.message("Aguarde...","Estamos processando seu pagamento","info",-1),setTimeout((function(){var a=e.form;$.ajax({method:"POST",url:"pagseguro/associado/boleto/anuidade",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:$.param(a),dataType:"json",success:function(a){"error"==a.message?(e.message("Erro","Erro ao processar o pagamento, o Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos.","error",-1),e.loading=!1):(e.message("Sucesso","Seu pagamento foi processado com sucesso","success",-1),e.loading=!1,window.open(a.response.paymentLink,"_blank"))},error:function(a){if(422==a.response.status&&"The given data was invalid."==a.response.data.message)return e.loading=!1,e.message("Erro","Erro ao processar o pagamento, o Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error");500==a.response.status&&(e.loading=!1,e.message("Erro","Erro ao processar o pagamento, atualize sua página e tente novamente.","error")),403==a.response.status&&"This action is unauthorized."==a.response.data.message&&(e.loading=!1,e.message("Erro","Ação não autorizada.","error"))}})}),1e3)):(e.loading=!1,e.message("Erro","Erro ao processar o pagamento, o Pagseguro pode estar com lentidão ou instabilidade, tente novamente em alguns minutos","error"))}))}));case 3:case"end":return a.stop()}}),a)})))()}},created:function(){this.getProdutos()}};var l=t(3379),c=t.n(l),m=t(5190),u={insert:"head",singleton:!1};c()(m.Z,u);m.Z.locals;const p=(0,t(1900).Z)(d,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("b-modal",{attrs:{id:"pagar",size:"xl"},scopedSlots:e._u([{key:"modal-header",fn:function(a){var r=a.close;return[t("div",{staticClass:"text-center"},[t("div",{attrs:{align:"center"}},[t("p",{staticStyle:{"font-size":"18px !important","text-align":"center !important"}},[e._v("Escolha uma forma de Pagamento testes Anuidade modal")])])]),e._v(" "),t("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return r()}}},[e._v("x")])]}},{key:"modal-footer",fn:function(a){var r=a.cancel;return[t("b-button",{attrs:{size:"md",variant:"outline-danger",disabled:e.loading},on:{click:function(e){return r()}}},[e._v("\n            Cancelar\n        ")]),e._v(" "),e.hasCredito?t("b-button",{attrs:{disabled:e.loading,size:"md",variant:"outline-success"},on:{click:function(a){return e.pagarCredito()}}},[e._v("Pagar\n        ")]):t("b-button",{attrs:{disabled:e.loading,size:"md",variant:"outline-success"},on:{click:function(a){return e.pagarBoleto()}}},[e._v("Gerar Boleto\n        ")])]}}])},[e._v(" "),[t("div",[t("b-card",{attrs:{"no-body":""}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{attrs:{title:"Cartão de Crédito",active:""}},[t("b-card-text",[t("div",{staticClass:"container"},[t("div",{staticClass:"section-head style-3 text-center z mb-3"},[t("h2",{staticClass:"title"},[e._v("Checkout "),t("img",{attrs:{src:e.url+"/images/pagseguro.png"}})]),e._v(" "),t("p",[e._v("Preencha os dados para finalizar o pagamento")])])]),e._v(" "),t("div",{staticClass:"container"},[t("b-row",[t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Número do Cartão","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####-####-####-####",expression:"'####-####-####-####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("numCartao")}],attrs:{name:"numCartao",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Número do Cartão"},on:{change:function(a){return e.validarBanderia()}},model:{value:e.form.numCartao,callback:function(a){e.$set(e.form,"numCartao",a)},expression:"form.numCartao"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("numCartao"),expression:"errors.has(`numCartao`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("numCartao"))+"\n                                        ")]),e._v(" "),t("div",{staticClass:"container hidden"},[t("div",{staticClass:"row"},[t("span",{staticClass:"col-6 input-group-text bandeira-cartao creditCard hidden",staticStyle:{"background-color":"#ffffff"},attrs:{id:"cartao-bandeira"}}),e._v(" "),t("span",{staticClass:"col-6 input-group-text cartao-nome creditCard form-login-help hidden",staticStyle:{"background-color":"#ffffff"},attrs:{type:"text",id:"cartao-nome"}})])])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Validade","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"##/####",expression:"'##/####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("validade")}],attrs:{name:"validade",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Validade"},model:{value:e.form.validade,callback:function(a){e.$set(e.form,"validade",a)},expression:"form.validade"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("validade"),expression:"errors.has(`validade`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("validade"))+"\n                                        ")])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Código de Segurança","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("cvv")}],attrs:{name:"cvv",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Código de Segurança"},model:{value:e.form.cvv,callback:function(a){e.$set(e.form,"cvv",a)},expression:"form.cvv"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("cvv"),expression:"errors.has(`cvv`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("cvv"))+"\n                                        ")])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Quantidade de Parcelas","label-class":"font-weight-bold"}},[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],staticClass:"form-control form-control-sm",class:["form-control form-control-sm",{"is-invalid":e.errors.has("qntParcelas")}],attrs:{disabled:!0,name:"qntParcelas",id:"qntParcelas",size:"sm","data-vv-as":"Quantidade de Parcelas"},model:{value:e.form.qntParcelas,callback:function(a){e.$set(e.form,"qntParcelas",a)},expression:"form.qntParcelas"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qntParcelas"),expression:"errors.has(`qntParcelas`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("qntParcelas"))+"\n                                        ")])],1)],1)],1),e._v(" "),t("div",{staticClass:"meio-pag-credito",staticStyle:{"padding-top":"10px","padding-bottom":"20px"},attrs:{id:"meio-pag-credito",name:"meio-pag-credito",align:"center"}}),e._v(" "),t("div",{staticClass:"hidden"},[t("form",{attrs:{method:"post","accept-charset":"utf-8",name:"formPagamentoCartaoCredito",id:"formPagamentoCartaoCredito",action:""}},[t("input",{attrs:{type:"hidden",name:"recupHashCartao",id:"recupHashCartao",value:""}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"anuidade2022",id:"anuidade2022"},domProps:{value:1}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"ativo",id:"ativo"},domProps:{value:e.form.ativo}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"cpf",id:"cpf"},domProps:{value:e.form.cpf}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"numCartao",id:"numCartao"},domProps:{value:e.form.numCartao}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"cvv",id:"cvv"},domProps:{value:e.form.cvv}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"validade",id:"validade"},domProps:{value:e.form.validade}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"id",id:"id"},domProps:{value:e.form.id}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"metodo",id:"metodo"},domProps:{value:e.form.metodo}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"name",id:"name"},domProps:{value:e.form.name}})])])],1)])],1),e._v(" "),t("b-tab",{attrs:{title:"Boleto"}},[t("b-card-text",[t("form",{staticClass:"form-horizontal",attrs:{action:"",method:"post","accept-charset":"utf-8",name:"formPagamentoBoleto",id:"formPagamentoBoleto"}},[t("fieldset",[t("div",{staticClass:"meio-pag-boleto",staticStyle:{"padding-bottom":"20px"},attrs:{align:"center"}})])])])],1)],1)],1)],1),e._v(" "),t("notifications",{attrs:{group:"submit",position:"center",width:"500px"}})]],2)}),[],!1,null,"2523acbd",null).exports}}]);