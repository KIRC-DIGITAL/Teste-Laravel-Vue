"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[126],{831:(e,a,t)=>{t.d(a,{Z:()=>o});var s=t(1519),r=t.n(s)()((function(e){return e[1]}));r.push([e.id,"[data-v-3a74587b] .modal-backdrop{opacity:.5!important}",""]);const o=r},5126:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var s=t(7757),r=t.n(s),o=t(2063);t(296);function n(e,a,t,s,r,o,n){try{var i=e[o](n),d=i.value}catch(e){return void t(e)}i.done?a(d):Promise.resolve(d).then(s,r)}function i(e){return function(){var a=this,t=arguments;return new Promise((function(s,r){var o=e.apply(a,t);function i(e){n(o,s,r,i,d,"next",e)}function d(e){n(o,s,r,i,d,"throw",e)}i(void 0)}))}}const d={props:["selectedPagar"],mixins:[o.Z],data:function(){return{loading:!1,url:"https://www.sistemas.intercom.org.br",amount:"0.20",selected:this.selectedPagar,form:{metodo:"credito",_method:"post",id:this.selected?this.selected.id:null,name:this.selected?this.selected.name:null,email:this.selected?this.selected.email:null,cpf:this.selected?this.selected.cpf:null,estrangeiro:this.selected?this.selected.estrangeiro:null,passaporte:this.selected?this.selected.passaporte:null,data_nascimento:this.selected?this.selected.data_nascimento:null,sexo_id:this.selected?this.selected.sexo_id:null,celular:this.selected?this.selected.celular:null,instituicao_id:this.selected?this.selected.instituicao_id:null,titulacao_id:this.selected?this.selected.titulacao_id:null,anuidade2022:this.selected?this.selected.anuidade2022:null,ativo:this.selected?this.selected.ativo:null}}},watch:{selected:function(){this.selected&&(this.form.metodo="credito",this.form._method="post",this.form.id=this.selected.id,this.form.name=this.selected.name,this.form.email=this.selected.email,this.form.password=this.selected.password,this.form.cpf=this.selected.cpf,this.form.estrangeiro=this.selected.estrangeiro,this.form.passaporte=this.selected.passaporte,this.form.anuidade2022=this.selected.anuidade2022,this.form.ativo=this.selected.ativo),this.listarMeiosPag()},numCartao:function(){this.form.numCartao&&validarBanderia()}},computed:{hasCredito:function(){return null!=this.form.numCartao}},methods:{getEstados:function(){var e=this;return i(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,axios.get("".concat("https://www.sistemas.intercom.org.br","/get/estados")).then((function(a){e.estados=a.data}));case 2:case"end":return a.stop()}}),a)})))()},listarMeiosPag:function(){var e=this;return i(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:PagSeguroDirectPayment.getPaymentMethods({amount:e.amount,success:function(e){$.each(e.paymentMethods.CREDIT_CARD.options,(function(e,a){$(".meio-pag-credito").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+a.images.MEDIUM.path+"'></span>")}))},error:function(e){},complete:function(e){}});case 1:case"end":return a.stop()}}),a)})))()},validarBanderia:function(){var e=this.form.numCartao.substr(0,7);e=e.replace(/\-/g,""),PagSeguroDirectPayment.getBrand({cardBin:e,success:function(e){console.log(e);var a=e.brand.name;$(".bandeira-cartao").html("<img src='https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/68x30/"+a+".png'>"),$(".cartao-nome").html(a),$("#cartao-bandeira").removeClass("hidden"),$(".cartao-nome").removeClass("hidden")},error:function(e){}});var a=document.getElementById("cartao-nome").innerText;console.log("validarBanderia **depois do call recupParcelas: "+a),this.form.bandeira=a,this.recupParcelas(a)},recupParcelas:function(e){console.log("recupParcelas");var a=$("#noIntInstalQuantity").val();console.log("noIntInstalQuantity",a),PagSeguroDirectPayment.getInstallments({amount:this.amount,maxInstallmentNoInterest:a,brand:e,success:function(e){$.each(e.installments,(function(e,a){$.each(a,(function(e,a){var t=a.installmentAmount.toFixed(2).replace(".",","),s=a.installmentAmount.toFixed(2);$("#qntParcelas").show().append("<option value='"+a.quantity+"' data-parcelas='"+s+"'>"+a.quantity+" parcelas de R$ "+t+"</option>")}))}))},error:function(e){},complete:function(e){}})},save:function(){var e=this.form.numCartao.replace(/\-/g,""),a=document.getElementById("cartao-nome").innerText,t=this.form.validade.split("/"),s=t[0],r=t[1],o=this.form.cvv;PagSeguroDirectPayment.createCardToken({cardNumber:e,brand:a,cvv:o,expirationMonth:s,expirationYear:r,success:function(e){var a;a=e.card.token,console.log("chamou recupHashCartao"),PagSeguroDirectPayment.onSenderHashReady((function(e){if("error"==e.status)return console.log(e.message),!1;var t=e.senderHash,s=$("#qntParcelas").find(":selected").attr("data-parcelas"),r=$("#qntParcelas").find(":selected").val(),o=document.getElementById("cartao-nome").innerText,n=$("#formPagamentoCartaoCredito").serializeArray();n.push({name:"hashCartao",value:t}),n.push({name:"tokenCartao",value:a}),n.push({name:"valorParcela",value:s}),n.push({name:"parcelas",value:r}),n.push({name:"cardname",value:o}),console.log("dados: "+JSON.stringify(n)),$.ajax({method:"POST",url:"pagseguro/associado/credito/anuidade",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:$.param(n),dataType:"json",success:function(e){"error"==e.message?window.location.href="https://www.sistemas.intercom.org.br?status=error":window.location.href="https://www.sistemas.intercom.org.br?status=sucess"},error:function(e){}})}))},error:function(e){},complete:function(e){}})}},created:function(){}};var c=t(3379),l=t.n(c),m=t(831),u={insert:"head",singleton:!1};l()(m.Z,u);m.Z.locals;const v=(0,t(1900).Z)(d,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("b-modal",{attrs:{id:"pagar",size:"xl"},scopedSlots:e._u([{key:"modal-header",fn:function(a){var s=a.close;return[t("div",{staticClass:"text-center"},[t("h1",[e._v("Pagar Anuidade 2022")]),e._v(" "),t("h1",[e._v("Escolha uma forma de Pagamento")])]),e._v(" "),t("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return s()}}},[e._v("x")])]}},{key:"modal-footer",fn:function(a){var s=a.cancel;return[t("b-button",{attrs:{size:"md",variant:"outline-danger",disabled:e.loading},on:{click:function(e){return s()}}},[e._v("\n                Cancelar\n            ")]),e._v(" "),t("b-button",{attrs:{disabled:e.loading,size:"md",variant:"outline-success"},on:{click:function(a){return e.save()}}},[e._v("\n                "+e._s(1==e.hasCredito?"Pagar":"Gerar Boleto")+"\n            ")])]}}])},[e._v(" "),[t("div",[t("b-card",{attrs:{"no-body":""}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{attrs:{title:"Cartão de Crédito",active:""}},[t("b-card-text",[t("div",{staticClass:"container"},[t("div",{staticClass:"section-head style-3 text-center z mb-3"},[t("h2",{staticClass:"title"},[e._v("Checkout "),t("img",{attrs:{src:e.url+"/images/pagseguro.png"}})]),e._v(" "),t("p",[e._v("Preencha os dados para finalizar o pagamento")])])]),e._v(" "),t("div",{staticClass:"container"},[t("b-row",[t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Número do Cartão","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####-####-####-####",expression:"'####-####-####-####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("numCartao")}],attrs:{name:"numCartao",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Número do Cartão"},on:{change:function(a){return e.validarBanderia()}},model:{value:e.form.numCartao,callback:function(a){e.$set(e.form,"numCartao",a)},expression:"form.numCartao"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("numCartao"),expression:"errors.has(`numCartao`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("numCartao"))+"\n                                        ")]),e._v(" "),t("div",{staticClass:"container hidden"},[t("div",{staticClass:"row"},[t("span",{staticClass:"col-6 input-group-text bandeira-cartao creditCard hidden",staticStyle:{"background-color":"#ffffff"},attrs:{id:"cartao-bandeira"}}),e._v(" "),t("span",{staticClass:"col-6 input-group-text cartao-nome creditCard form-login-help hidden",staticStyle:{"background-color":"#ffffff"},attrs:{type:"text",id:"cartao-nome"}})])])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Validade","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"##/####",expression:"'##/####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("validade")}],attrs:{name:"validade",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Validade"},model:{value:e.form.validade,callback:function(a){e.$set(e.form,"validade",a)},expression:"form.validade"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("validade"),expression:"errors.has(`validade`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("validade"))+"\n                                        ")])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Código de Segurança","label-class":"font-weight-bold"}},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],class:["form-control form-control-sm",{"is-invalid":e.errors.has("cvv")}],attrs:{name:"cvv",size:"sm",type:"text",disabled:e.loading,"aria-describedby":"input-1-live-feedback","data-vv-as":"Código de Segurança"},model:{value:e.form.cvv,callback:function(a){e.$set(e.form,"cvv",a)},expression:"form.cvv"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("cvv"),expression:"errors.has(`cvv`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("cvv"))+"\n                                        ")])],1)],1),e._v(" "),t("b-col",{attrs:{cols:"12",sm:"6",lg:"6"}},[t("b-form-group",{attrs:{label:"Quantidade de Parcelas","label-class":"font-weight-bold"}},[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],staticClass:"form-control form-control-sm",class:["form-control form-control-sm",{"is-invalid":e.errors.has("qntParcelas")}],attrs:{disabled:e.loading,name:"qntParcelas",id:"qntParcelas",size:"sm","data-vv-as":"Quantidade de Parcelas"},model:{value:e.form.qntParcelas,callback:function(a){e.$set(e.form,"qntParcelas",a)},expression:"form.qntParcelas"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("qntParcelas"),expression:"errors.has(`qntParcelas`)"}],staticClass:"invalid-feedback"},[e._v("\n                                            "+e._s(e.errors.first("qntParcelas"))+"\n                                        ")])],1)],1)],1),e._v(" "),t("div",{staticClass:"meio-pag-credito",staticStyle:{"padding-top":"10px","padding-bottom":"20px"},attrs:{id:"meio-pag-credito",name:"meio-pag-credito",align:"center"}}),e._v(" "),t("div",{staticClass:"hidden"},[t("form",{attrs:{method:"post","accept-charset":"utf-8",name:"formPagamentoCartaoCredito",id:"formPagamentoCartaoCredito",action:""}},[t("input",{attrs:{type:"hidden",name:"recupHashCartao",id:"recupHashCartao",value:""}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"anuidade2022",id:"anuidade2022"},domProps:{value:1}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"ativo",id:"ativo"},domProps:{value:e.selected.ativo}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"cpf",id:"cpf"},domProps:{value:e.selected.cpf}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"numCartao",id:"numCartao"},domProps:{value:e.form.numCartao}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"cvv",id:"cvv"},domProps:{value:e.form.cvv}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"validade",id:"validade"},domProps:{value:e.form.validade}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"id",id:"id"},domProps:{value:e.selected.id}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"metodo",id:"metodo"},domProps:{value:e.selected.metodo}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"name",id:"name"},domProps:{value:e.selected.name}})])])],1)])],1),e._v(" "),t("b-tab",{attrs:{title:"Boleto"}},[t("b-card-text",[e._v("Tab contents 2")])],1)],1)],1)],1)],e._v(" "),e._v(" "),t("notifications",{attrs:{group:"submit",position:"center bottom"}})],2)}),[],!1,null,"3a74587b",null).exports}}]);